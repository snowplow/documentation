---
title: "Roku media tracking (v2)"
sidebar_label: "Media tracking (v2)"
date: "2025-03-21"
sidebar_position: 20
description: "Track Roku media playback with v2 schemas including session entities, ping events, and percentage progress tracking for audio and video nodes."
keywords: ["roku media tracking v2", "media session", "ping events"]
---

```mdx-code-block
import Media from "@site/docs/reusable/media/_index.md"
```

Media tracking has [multiple versions](/docs/sources/web-trackers/tracking-events/media/index.md) of schema available.
This document is for version 2 of the schemas; tracker versions earlier than v0.3.0 [only support v1 tracking](/docs/sources/roku-tracker/media-tracking/v1/index.md).


## Configuration

Most tracking of [Audio](https://developer.roku.com/en-au/docs/references/scenegraph/media-playback-nodes/audio.md) and [Video](https://developer.roku.com/en-au/docs/references/scenegraph/media-playback-nodes/video.md) nodes is automatic, so configuration is minimal.

The primary method for configuring media tracking is the `enableMediaTracking` method, which should include the options below, including the media node to track.
It has a corresponding `disableMediaTracking` method to stop generating events.
For events not automatically tracked, `trackMediaEvent` allows tracking custom events while including media-related entities.

The accepted options include:

| Attribute                                   | Type                 | Description                                                                                   | Required?                                |
| ------------------------------------------- | -------------------- | --------------------------------------------------------------------------------------------- | ---------------------------------------- |
| `media` / `audio` / `video`                 | Audio / Video        | Audio/Video node to be tracked                                                                | yes                                      |
| `version`                                   | Integer              | Tracking schema version to use; defaults to `2` when using `enableMediaTracking`              | no                                       |
| `id`                                        | UUID                 | A unique ID to use for the media `session` entity to group all tracked events                 | no; generated by tracker if not provided |
| `label` / `options.label`                   | String               | An identifiable custom label sent with the event in the `media_player` entity                 | no                                       |
| `sessions`                                  | boolean              | Whether to attach the media `session` entity on tracked events                                | no; defaults to `true`                   |
| `pings`                                     | boolean              | Whether to periodically generate media `ping_event`s while content is playing                 | no; defaults to `true`                   |
| `pingInterval` / `options.positionInterval` | Integer              | Interval in seconds in which `ping_event`s should be reported                                 | no, defaults to `30` seconds             |
| `boundaries` / `options.boundaries`         | Integer[]            | Percentage boundaries in playback for which `percentage_progress_event`s will be sent         | no, defaults toÂ `[25, 50, 75]`           |
| `captureEvents` / `options.captureEvents`   | String[]             | Types of events to capture. If specified, the event names should not have the `_event` suffix | no, defaults to all events               |
| `context` / `entities`                      | SelfDescribingJSON[] | Array of custom entities to include with all generated events                                 | no                                       |

## Migrating from v1

If you are migrating from the [v1 media tracking](/docs/sources/roku-tracker/media-tracking/v1/index.md), v2 has compatibility options to make the change easier.

For backwards compatibility with the earlier tracking API, you can continue using `enableVideoTracking` or `enableAudioTracking` instead of `enableMediaTracking`, and pass the node via the `audio`/`video` option instead of `media`.
For most other options, v2 will accept either v1 or v2 `roAssociativeArray` formats.
The tracking will work with any combination of these method and option names regardless of node type, as long as `version: 2` is specified.
You can also specifically opt into version 1 by passing `version: 1` for any of these methods, though v2 options may not be recognized.

If using specific `version` values, the same version should also be specified for the corresponding `disable*Tracking` method.
Similarly, mixing `enableVideoTracking` and `disableMediaTracking` will not work unless versions are specified consistently.

The additional options differ by version; but version 2 will accept the options from version 1 if it can't find the newer equivalent settings.

| v2 Attribute                | v1 Fallback                 | Type                 | Description                                                                                   |
| --------------------------- | --------------------------- | -------------------- | --------------------------------------------------------------------------------------------- |
| `media` / `audio` / `video` | `media` / `audio` / `video` | Audio / Video        | Audio/Video node to be tracked                                                                |
| `version`                   | `version`                   | Integer              | Tracking schema version to use; should be set to 2 if not using `enableMediaTracking`         |
| `id`                        | N/A                         | UUID                 | A unique ID to use for the media `session` entity to group all tracked events                 |
| `label`                     | `options.label`             | String               | An identifiable custom label sent with the event in the `media_player` entity                 |
| `sessions`                  | Default enabled             | boolean              | Whether to attach the media `session` entity on tracked events                                |
| `pings`                     | Default enabled             | boolean              | Whether to periodically generate media `ping_event`s while content is playing                 |
| `pingInterval`              | `options.positionInterval`  | Integer              | Interval in seconds in which `ping_event`s should be reported                                 |
| `boundaries`                | `options.boundaries`        | Integer[]            | Percentage boundaries in playback for which `percentage_progress_event`s will be sent         |
| `captureEvents`             | `options.captureEvents`     | String[]             | Types of events to capture. If specified, the event names should not have the `_event` suffix |
| `context` / `entities`      | `context`                   | SelfDescribingJSON[] | Array of custom entities to include with all generated events                                 |


## Auto-tracked events

The Roku tracker automatically tracks events from Audio/Video nodes:

- Ready, play, pause, end events
- Seek start, seek end events
- Ping events
- Percent progress events (if configured)
- Buffer start, buffer end events
- Quality change events
- Error events

To track events manually or track events not auto-tracked, use `trackMediaEvent`:

```brightscript
m.global.snowplow.trackMediaEvent = {
    media: m.Video,
    schema: "iglu:com.snowplowanalytics.snowplow.media/ad_click_event/jsonschema/1-0-0",
    data: { "percentProgress": 50 }
}
```

## Media Player Events

```mdx-code-block
<Media platforms={["roku"]} />
```
