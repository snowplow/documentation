---
title: "Postgres Loader Configuration Reference"
date: "2021-07-07"
sidebar_position: 0
---

This is a complete list of the options that can be configured in the postgres loader's HOCON config file. The [example configs in github](https://github.com/snowplow-incubator/snowplow-postgres-loader/tree/master/config) show how to prepare an input file.

<table className="has-fixed-layout"><tbody><tr><td><code>input.type</code></td><td>Required. Can be "Kinesis", "PubSub" or "Local". Configures where input events will be read from.</td></tr><tr><td><code>input.streamName</code></td><td>Required when <code>input.type</code> is Kinesis. Name of the Kinesis stream to read from.</td></tr><tr><td><code>input.region</code></td><td>Required when <code>input.type</code> is Kinesis. AWS region in which the Kinesis stream resides.</td></tr><tr><td><code>input.initialPosition</code></td><td>Optional. Used when <code>input.type</code> is Kinesis. Use "TRIM_HORIZON" (the default) to start streaming at the last untrimmed record in the shard, which is the oldest data record in the shard. Or use "LATEST" to start streaming just after the most recent record in the shard.</td></tr><tr><td><code>input.retrievalMode.type</code></td><td>Optional. When <code>input.type</code> is Kinesis, this sets the polling mode for retrieving records. Can be "FanOut" (the default) or "Polling".</td></tr><tr><td><code>input.retrievalMode.maxRecords</code></td><td>Optional. Used when <code>input.retrievalMode.type</code> is "Polling". Configures how many records are fetched in each poll of the kinesis stream. Default 10000.</td></tr><tr><td><code>input.projectId</code></td><td>Required when <code>input.type</code> is PubSub. The name of your GCP project.</td></tr><tr><td><code>input.subscriptionId</code></td><td>Required when <code>input.type</code> is PubSub. Id of the PubSub subscription to read events from</td></tr><tr><td><code>input.path</code></td><td>Required when <code>input.type</code> is Local. Path for event source. It can be directory or file. If it is directory, all the files under given directory will be read recursively. Also, given path can be both absolute path or relative path w.r.t. executable.</td></tr><tr><td><code>output.good.host</code></td><td>Required. Hostname of the postgres database.</td></tr><tr><td><code>output.good.port</code></td><td>Optional. Port number of the postgres database. Default 5432.</td></tr><tr><td><code>output.good.database</code></td><td>Required. Name of the postgres database.</td></tr><tr><td><code>output.good.username</code></td><td>Required. Postgres role name to use when connecting to the database</td></tr><tr><td><code>output.good.password</code></td><td>Required. Password for the postgres user.</td></tr><tr><td><code>output.good.schema</code></td><td>Required. The Postgres schema in which to create tables and write events.</td></tr><tr><td><code>output.good.sslMode</code></td><td>Optional. Configures how the client and server agree on ssl protection. Default "REQUIRE"</td></tr><tr><td><code>output.bad.type</code></td><td>Optional. Can be "Kinesis", "PubSub", "Local" or "Noop". Configures where failed events will be sent. Default is "Noop" which means failed events will be discarded</td></tr><tr><td><code>output.bad.streamName</code></td><td>Required when <code>bad.type</code> is Kinesis. Name of the Kinesis stream to write to.</td></tr><tr><td><code>output.bad.region</code></td><td>Required when <code>bad.type</code> is Kinesis. AWS region in which the Kinesis stream resides.</td></tr><tr><td><code>output.bad.projectId</code></td><td>Required when <code>bad.type</code> is PubSub. The name of your GCP project.</td></tr><tr><td><code>output.bad.topicId</code></td><td>Required when <code>bad.type</code> is PubSub. Id of the PubSub topic to write failed events to</td></tr><tr><td><code>output.bad.path</code></td><td>Required when <code>bad.type</code> is Local. Path of the file to write failed events</td></tr><tr><td><code>purpose</code></td><td>Optional. Set this to "ENRICHED_EVENTS" (the default) when reading the stream of enriched events in tsv format. Set this to "JSON" when reading a stream of self-describing json, e.g. snowplow [bad rows](https://github.com/snowplow/iglu-central/tree/master/schemas/com.snowplowanalytics.snowplow.badrows).</td></tr><tr><td><code>monitoring.metrics.cloudWatch</code></td><td>Optional boolean, with default true. For kinesis input, this is used to disable sending metrics to cloudwatch.</td></tr></tbody></table>

#### Advanced options

We believe these advanced options are set to sensible defaults, and hopefully you won't need to ever change them.

<table className="has-fixed-layout"><tbody><tr><td><code>backoffPolicy.minBackoff</code></td><td>If producer (PubSub or Kinesis) fails to send item, it will retry to send it again. This field configures backoff time for first retry. Every retry will double the backoff time of previous one.</td></tr><tr><td><code>backoffPolicy.maxBackoff</code></td><td>Maximum backoff time for retry. After this value is reached, backoff time will no more increase.</td></tr><tr><td><code>input.checkpointSettings.maxBatchSize</code></td><td>Used when <code>input.type</code> is Kinesis. Determines the max number of records to aggregate before checkpointing the records. Default is 1000.</td></tr><tr><td><code>input.checkpointSettings.maxBatchWait</code></td><td>Used when <code>input.type</code> is Kinesis. Determines the max amount of time to wait before checkpointing the records. Default is 10 seconds.</td></tr><tr><td><code>input.checkpointSettings.maxConcurrent</code></td><td>Used when <code>input.type</code> is PubSub. The max number of concurrent evaluation for checkpointer.</td></tr><tr><td><code>output.good.maxConnections</code></td><td>Maximum number of connections database pool is allowed to reach. Default 10</td></tr><tr><td><code>output.good.threadPoolSize</code></td><td>Size of the thread pool for blocking database operations. Default is value of "maxConnections"</td></tr><tr><td><code>output.bad.delayThreshold</code></td><td>Set the delay threshold to use for batching. After this amount of time has elapsed (counting from the first element added), the elements will be wrapped up in a batch and sent. Default 200 milliseconds</td></tr><tr><td><code>output.bad.maxBatchSize</code></td><td>A batch of messages will be emitted when the number of events in batch reaches the given size. Default 500</td></tr><tr><td><code>output.bad.maxBatchBytes</code></td><td>A batch of messages will be emitted when the size of the batch reaches the given size. Default 5 MB</td></tr></tbody></table>
